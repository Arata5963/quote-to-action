<%# iOS風 全体/自分 トグルスイッチ %>
<%# locals: (current_tab:) %>

<% if user_signed_in? %>
  <div class="flex items-center justify-center"
       data-controller="toggle"
       data-toggle-scope-value="<%= current_tab %>"
       data-toggle-form-id-value="search_form">

    <%# 「全体」ラベル %>
    <span class="text-sm mr-3 transition-colors cursor-pointer <%= current_tab != 'mine' ? 'text-primary font-medium' : 'text-primary/50' %>"
          data-toggle-target="labelAll"
          data-action="click->toggle#toggle">
      全体
    </span>

    <%# トグルスイッチ本体 %>
    <button type="button"
            class="relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent bg-accent/30 transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2"
            data-action="click->toggle#toggle"
            aria-pressed="<%= current_tab == 'mine' %>"
            aria-label="投稿フィルター切り替え">
      <%# スイッチノブ %>
      <span class="pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out <%= current_tab == 'mine' ? 'translate-x-full' : 'translate-x-0' %>"
            data-toggle-target="switch"></span>
    </button>

    <%# 「自分」ラベル %>
    <span class="text-sm ml-3 transition-colors cursor-pointer <%= current_tab == 'mine' ? 'text-primary font-medium' : 'text-primary/50' %>"
          data-toggle-target="labelMine"
          data-action="click->toggle#toggle">
      自分
    </span>
  </div>
<% end %>
