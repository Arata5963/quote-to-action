<%# app/views/posts/_post_card.html.erb %>
<%# 投稿カード（横型・2列グリッド対応・高さ統一） %>

<article class="bg-white rounded-lg border border-gray-200 p-4 hover:border-gray-300 transition-colors group h-full">
  <div class="flex items-center gap-4 h-full">

    <%# 左側: サムネイル %>
    <%= link_to post_path(post, from: local_assigns[:from]), class: "flex-shrink-0" do %>
      <div class="w-40 aspect-video rounded-lg overflow-hidden bg-accent/10">
        <%= image_tag post.youtube_thumbnail_url(size: :mqdefault),
              alt: post.youtube_title || post.action_plan,
              class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",
              loading: "lazy" %>
      </div>
    <% end %>

    <%# 右側: コンテンツ（flex-colで縦配置） %>
    <div class="flex-1 min-w-0 flex flex-col">

      <%# 上部: 参加者数 + いいね（固定位置） %>
      <div class="flex items-center justify-between gap-2">
        <span class="text-sm text-gray-400"><%= post.entry_users.count %> users</span>
        <%# 応援ボタン %>
        <div id="cheer_button_<%= post.id %>" class="flex-shrink-0">
          <%= render 'cheers/cheer_button_minimal', post: post %>
        </div>
      </div>

      <%# 中央: アクションプラン（2行分の高さを固定確保） %>
      <%= link_to post_path(post, from: local_assigns[:from]), class: "block mt-2" do %>
        <h3 class="text-base font-medium text-primary line-clamp-2 h-12 group-hover:text-accent transition-colors leading-normal">
          <%= post.action_plan %>
        </h3>
      <% end %>

      <%# 下部: エントリー数バッジ（mt-autoで下部固定） %>
      <div class="flex items-center gap-2 mt-auto pt-2 flex-wrap">
        <span class="text-xs border border-accent/30 text-primary/50 px-2.5 py-1 rounded-full">
          <%= post.post_entries.count %> entries
        </span>
      </div>

    </div>
  </div>
</article>
