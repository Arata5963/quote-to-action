<%# app/views/posts/_group_header.html.erb %>
<%# グループヘッダー（折りたたみ対応） %>
<%# locals: title, badge_count, badge_color, icon_svg, open (default: true) %>

<div class="mb-6" data-controller="collapsible" data-collapsible-open-value="<%= local_assigns.fetch(:open, true) %>">
  <button type="button"
          data-action="click->collapsible#toggle"
          class="w-full flex items-center justify-between p-4 rounded-xl bg-white border border-accent/20 shadow-sm hover:shadow-md transition-shadow">
    <div class="flex items-center gap-3">
      <%# アイコン %>
      <div class="h-10 w-10 rounded-full bg-<%= badge_color %>/10 flex items-center justify-center">
        <%= icon_svg %>
      </div>

      <%# タイトル %>
      <h2 class="text-lg font-bold text-primary"><%= title %></h2>

      <%# バッジ（件数） %>
      <span class="inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-<%= badge_color %>/10 text-<%= badge_color %>">
        <%= badge_count %>件
      </span>
    </div>

    <%# 折りたたみアイコン %>
    <svg data-collapsible-target="icon"
         class="h-5 w-5 text-primary/40 transition-transform duration-200"
         viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
    </svg>
  </button>

  <%# コンテンツ（投稿リスト） %>
  <div data-collapsible-target="content" class="mt-4">
    <%= yield %>
  </div>
</div>
