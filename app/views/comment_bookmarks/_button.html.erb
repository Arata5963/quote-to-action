<%# app/views/comment_bookmarks/_button.html.erb %>
<%# ブックマークボタン %>

<%= turbo_frame_tag dom_id(youtube_comment, :bookmark) do %>
  <% if user_signed_in? %>
    <% if bookmarked %>
      <%= button_to youtube_comment_bookmark_path(youtube_comment),
                    method: :delete,
                    class: "flex items-center gap-1 text-amber-500 hover:text-amber-600 transition-colors text-sm",
                    data: { turbo_stream: true } do %>
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M5 5c0-1.1.9-2 2-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
        </svg>
        <span class="text-xs">保存済み</span>
      <% end %>
    <% else %>
      <%= button_to youtube_comment_bookmark_path(youtube_comment),
                    method: :post,
                    class: "flex items-center gap-1 text-gray-400 hover:text-amber-500 transition-colors text-sm",
                    data: { turbo_stream: true } do %>
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 5c0-1.1.9-2 2-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
        </svg>
        <span class="text-xs">保存</span>
      <% end %>
    <% end %>
  <% else %>
    <%= link_to new_user_session_path,
                class: "flex items-center gap-1 text-gray-400 hover:text-amber-500 transition-colors text-sm" do %>
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 5c0-1.1.9-2 2-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
      </svg>
      <span class="text-xs">保存</span>
    <% end %>
  <% end %>
<% end %>
