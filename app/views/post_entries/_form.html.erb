<%# app/views/post_entries/_form.html.erb %>
<%# ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³è¿½è¨˜ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå˜ä¸€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç”¨ãƒ»æ—§å½¢å¼ï¼‰ %>
<%# æ³¨: æ–°ã—ã„multi_entry_formã®ä½¿ç”¨ã‚’æ¨å¥¨ %>

<%= form_with url: post_post_entries_path(post), method: :post, local: true,
      html: { class: "space-y-4", data: { controller: "entry-form" } } do |f| %>

  <%# ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆç¨®é¡é¸æŠ %>
  <div class="grid grid-cols-3 gap-2">
    <%# è¦ç´„ %>
    <label class="cursor-pointer">
      <input type="radio" name="post_entry[entry_type]" value="key_point"
             data-entry-form-target="typeRadio"
             data-action="entry-form#changeType"
             class="sr-only peer">
      <div class="p-3 rounded-lg border-2 border-gray-200 peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:border-gray-300 transition-colors text-center">
        <span class="text-xl">ğŸ“</span>
        <p class="text-xs font-medium text-gray-700 mt-0.5">è¦ç´„</p>
      </div>
    </label>

    <%# å¼•ç”¨ %>
    <label class="cursor-pointer">
      <input type="radio" name="post_entry[entry_type]" value="quote"
             data-entry-form-target="typeRadio"
             data-action="entry-form#changeType"
             class="sr-only peer">
      <div class="p-3 rounded-lg border-2 border-gray-200 peer-checked:border-purple-500 peer-checked:bg-purple-50 hover:border-gray-300 transition-colors text-center">
        <span class="text-xl">ğŸ’¬</span>
        <p class="text-xs font-medium text-gray-700 mt-0.5">å¼•ç”¨</p>
      </div>
    </label>

    <%# ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ %>
    <label class="cursor-pointer">
      <input type="radio" name="post_entry[entry_type]" value="action"
             data-entry-form-target="typeRadio"
             data-action="entry-form#changeType"
             class="sr-only peer"
             checked>
      <div class="p-3 rounded-lg border-2 border-gray-200 peer-checked:border-orange-500 peer-checked:bg-orange-50 hover:border-gray-300 transition-colors text-center">
        <span class="text-xl">ğŸ¯</span>
        <p class="text-xs font-medium text-gray-700 mt-0.5">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</p>
      </div>
    </label>
  </div>

  <%# è¦ç´„ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ %>
  <div data-entry-form-target="keyPointFields" class="hidden">
    <textarea name="post_entry[content]" rows="3"
              id="inline_key_point_content"
              data-entry-form-target="keyPointContent"
              placeholder="å‹•ç”»ã®å†…å®¹ã‚’è¦ç´„ã¯ï¼Ÿ"
              class="w-full px-3 py-2 rounded-lg border border-gray-200 text-gray-900 placeholder-gray-400 text-sm focus:border-gray-400 focus:ring-1 focus:ring-gray-400 transition-colors"></textarea>
  </div>

  <%# å¼•ç”¨ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ %>
  <div data-entry-form-target="quoteFields" class="hidden">
    <textarea name="post_entry[content]" rows="3"
              id="inline_quote_content"
              data-entry-form-target="quoteContent"
              placeholder="éŸ¿ã„ãŸãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å…¥åŠ›..."
              class="w-full px-3 py-2 rounded-lg border border-gray-200 text-gray-900 placeholder-gray-400 text-sm focus:border-gray-400 focus:ring-1 focus:ring-gray-400 transition-colors"></textarea>
  </div>

  <%# ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ %>
  <div data-entry-form-target="actionFields" class="space-y-3">
    <textarea name="post_entry[content]" rows="2"
              id="inline_action_content"
              data-entry-form-target="actionContent"
              placeholder="ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ"
              class="w-full px-3 py-2 rounded-lg border border-gray-200 text-gray-900 placeholder-gray-400 text-sm focus:border-gray-400 focus:ring-1 focus:ring-gray-400 transition-colors"></textarea>
    <input type="text" name="post_entry[deadline]"
           id="inline_action_deadline"
           data-entry-form-target="actionDeadline"
           data-controller="flatpickr"
           data-flatpickr-target="input"
           placeholder="æœŸæ—¥ã‚’é¸æŠ"
           class="w-full px-3 py-2 rounded-lg border border-gray-200 text-gray-900 text-sm focus:border-gray-400 focus:ring-1 focus:ring-gray-400 transition-colors">
  </div>

  <%# æº€è¶³åº¦ï¼ˆä»»æ„ï¼‰ %>
  <div class="pt-2 border-t border-gray-100">
    <p class="text-xs text-gray-500 mb-2">ã“ã®å‹•ç”»ã®æº€è¶³åº¦ï¼ˆä»»æ„ï¼‰</p>
    <div data-controller="rating" class="flex items-center gap-1">
      <input type="hidden" name="post_entry[satisfaction_rating]" value="" data-rating-target="input">
      <% (1..5).each do |i| %>
        <button type="button"
                data-rating-target="star"
                data-rating="<%= i %>"
                data-action="click->rating#select mouseenter->rating#hover mouseleave->rating#leave"
                class="text-2xl text-gray-300 hover:scale-110 transition-transform cursor-pointer focus:outline-none"
                title="<%= PostEntry::SATISFACTION_LABELS[i] %>">
          â˜…
        </button>
      <% end %>
      <button type="button"
              data-action="click->rating#select"
              data-rating="0"
              class="ml-2 text-xs text-gray-400 hover:text-gray-600">
        ã‚¯ãƒªã‚¢
      </button>
    </div>
  </div>

  <%# é€ä¿¡ãƒœã‚¿ãƒ³ %>
  <div class="flex justify-end">
    <button type="submit"
            class="px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors">
      è¿½è¨˜ã™ã‚‹
    </button>
  </div>
<% end %>
