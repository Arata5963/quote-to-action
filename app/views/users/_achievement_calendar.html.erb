<%# app/views/users/_achievement_calendar.html.erb %>
<%# 達成カレンダーセクション %>
<div>

  <%# 月表示 %>
  <div class="text-center mb-6">
    <span class="text-lg font-semibold text-primary">
      <%= @calendar_year %>年<%= @calendar_month %>月
    </span>
  </div>

  <%# 曜日ヘッダー %>
  <div class="grid grid-cols-7 gap-2 mb-2">
    <% weekday_headers.each do |weekday| %>
      <div class="text-center text-xs font-medium text-primary/60">
        <%= weekday %>
      </div>
    <% end %>
  </div>

  <%# カレンダーグリッド %>
  <div class="grid grid-cols-7 gap-2 mb-6">
    <% calendar_days = generate_monthly_calendar(@achievement_counts, @calendar_year, @calendar_month) %>
    <% calendar_days.each do |cell| %>
      <div class="aspect-square">
        <% if cell[:type] == :blank %>
          <%# 空白セル %>
          <div class="w-full h-full"></div>
        <% else %>
          <%# 日付セル %>
          <div class="<%= cell[:has_achievement] ? 'bg-accent text-white shadow-sm' : 'bg-cream text-primary/40' %> w-full h-full rounded-lg flex items-center justify-center text-xs font-medium transition-all">
            <%= cell[:day] %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>

  <%# 凡例 %>
  <div class="flex items-center justify-center gap-4 text-xs text-primary/60">
    <div class="flex items-center gap-2">
      <div class="w-4 h-4 rounded bg-accent"></div>
      <span>達成あり</span>
    </div>
    <div class="flex items-center gap-2">
      <div class="w-4 h-4 rounded bg-cream border border-primary/10"></div>
      <span>達成なし</span>
    </div>
  </div>

</div>
