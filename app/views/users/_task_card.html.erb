<%# app/views/users/_task_card.html.erb %>
<%# note風の横スクロールタスクカード %>
<%= link_to post_path(post), class: "flex-shrink-0 w-48 sm:w-56 group" do %>
  <div class="bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow">
    <%# サムネイル %>
    <div class="aspect-video relative overflow-hidden">
      <%= image_tag post.youtube_thumbnail_url(size: :mqdefault),
          alt: post.youtube_title,
          class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",
          loading: "lazy" %>
      <%# 期限バッジ %>
      <% if entry.deadline %>
        <% days_diff = (entry.deadline - Date.current).to_i %>
        <span class="absolute top-2 right-2 text-[10px] font-bold px-2 py-0.5 rounded-full shadow
          <%= days_diff < 0 ? 'bg-red-500 text-white' : days_diff == 0 ? 'bg-amber-500 text-white' : 'bg-gray-700/80 text-white' %>">
          <%= days_diff < 0 ? "#{-days_diff}日超過" : days_diff == 0 ? "今日" : "#{days_diff}日後" %>
        </span>
      <% end %>
    </div>
    <%# コンテンツ %>
    <div class="p-3">
      <p class="text-sm font-medium text-gray-900 line-clamp-2 leading-snug mb-2">
        <%= truncate(entry.content, length: 50) %>
      </p>
      <p class="text-xs text-gray-500 truncate">
        <%= post.youtube_title %>
      </p>
    </div>
  </div>
<% end %>
