<%# app/views/users/show.html.erb %>
<% content_for :title, "マイページ" %>

<div class="min-h-screen py-8">
  <div class="max-w-2xl mx-auto px-4">

    <%# 戻るリンク %>
    <div class="mb-6">
      <%= link_to posts_path, class: "inline-flex items-center gap-2 text-primary/60 hover:text-accent transition-colors" do %>
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"/>
        </svg>
        <span>投稿一覧に戻る</span>
      <% end %>
    </div>

    <%# プロフィール表示 %>
    <div class="bg-white rounded-2xl border border-accent/20 shadow-sm p-6 lg:p-8">

      <%# ページタイトル + 編集リンク %>
      <div class="flex items-center justify-between mb-8">
        <h1 class="text-2xl font-bold text-primary">プロフィール</h1>
        <%= link_to edit_profile_path, class: "flex items-center gap-2 px-4 py-2 rounded-xl bg-cream hover:bg-accent/10 text-primary hover:text-accent transition-colors" do %>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
          </svg>
          <span class="text-sm font-medium">編集</span>
        <% end %>
      </div>

      <%# プロフィール画像・ユーザー名 %>
      <div class="flex items-center gap-6 mb-8">
        <div class="flex-shrink-0">
          <% if @user.avatar.present? %>
            <%= image_tag @user.avatar.url, alt: "プロフィール画像",
                  class: "h-24 w-24 rounded-full object-cover border-2 border-accent/20" %>
          <% else %>
            <div class="h-24 w-24 bg-accent/10 rounded-full flex items-center justify-center border-2 border-accent/20">
              <svg class="h-12 w-12 text-primary/40" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
              </svg>
            </div>
          <% end %>
        </div>
        <div>
          <h2 class="text-xl font-semibold text-primary"><%= @user.name.presence || "名無しさん" %></h2>
        </div>
      </div>

      <%# 達成カレンダー %>
      <%= render "achievement_calendar" %>

    </div>
  </div>
</div>
