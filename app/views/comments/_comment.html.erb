<%# app/views/comments/_comment.html.erb %>
<div class="bg-white rounded-xl border border-gray-200 p-4">
  <%# ヘッダー部分 %>
  <div class="flex justify-between items-start mb-3">
    <%# ユーザー情報 %>
    <div class="flex items-center gap-3">
      <% if comment.user.avatar.present? %>
        <%= image_tag comment.user.avatar.thumb.url, class: "w-10 h-10 rounded-full object-cover" %>
      <% else %>
        <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center">
          <svg class="w-6 h-6 text-gray-500" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </div>
      <% end %>

      <div>
        <span class="font-semibold text-gray-900 block">
          <%= comment.user.email.split('@').first %>
        </span>
        <span class="text-xs text-gray-500">
          <%= l(comment.created_at, format: :short) %>
        </span>
      </div>
    </div>

    <%# 削除ボタン %>
    <% if comment.user == current_user %>
      <%= button_to post_comment_path(@post, comment),
                    method: :delete,
                    data: { turbo_confirm: t('comments.destroy.confirm') },
                    class: "p-2 text-gray-500 hover:text-danger hover:bg-danger-50 rounded-lg transition-colors" do %>
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
        </svg>
      <% end %>
    <% end %>
  </div>

  <%# コメント本文 %>
  <p class="text-gray-700 whitespace-pre-line pl-13">
    <%= comment.content %>
  </p>
</div>
